-- Create database
CREATE DATABASE IF NOT EXISTS jual_pulsa;
USE jual_pulsa;                                                                                                                                                                                                                              

-- Tabel penjual
CREATE TABLE penjual (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    IdNama VARCHAR(50),
    NIK VARCHAR(20),
    jenis_kelamin ENUM('Laki-laki', 'Perempuan'),
    NO_tlpn VARCHAR(20),
    alamat TEXT,
    karyawan VARCHAR(50)
);

-- Tabel supplier
CREATE TABLE supplier (
    Idsupplier INT PRIMARY KEY AUTO_INCREMENT,
    Nama VARCHAR(100),
    web VARCHAR(100),
    deposit DECIMAL(12,2),
    No_Tlpn VARCHAR(20),
    Saldominimum DECIMAL(12,2),
    ID_Penjual INT
);

-- ALTER: Relasi supplier -> penjual
ALTER TABLE supplier
ADD CONSTRAINT fk_supplier_penjual
FOREIGN KEY (ID_Penjual) REFERENCES penjual(ID);

-- Tabel pulsa
CREATE TABLE pulsa (
    Id_Pulsa INT PRIMARY KEY AUTO_INCREMENT,
    Nama_Pulsa VARCHAR(50),
    Harga_pulsa DECIMAL(10,2),
    ID_Penjual INT
);

-- ALTER: Relasi pulsa -> penjual
ALTER TABLE pulsa
ADD CONSTRAINT fk_pulsa_penjual
FOREIGN KEY (ID_Penjual) REFERENCES penjual(ID);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
-- Tabel pelanggan
CREATE TABLE pelanggan (
    Id_Pelanggan INT PRIMARY KEY AUTO_INCREMENT,
    Nama_Pelanggan VARCHAR(100),
    No_Telp_Pelanggan VARCHAR(20)
);

-- Tabel transaksi
CREATE TABLE transaksi (
    Id_Transaksi INT PRIMARY KEY AUTO_INCREMENT,
    Id_Pelanggan INT,
    Id_Karyawan INT, -- Ini adalah penjual (ID)
    Id_Pulsa INT,
    Tanggal_Transaksi DATE,
    Total_Transaksi DECIMAL(12,2)
);

-- ALTER: Relasi transaksi -> pelanggan, penjual, pulsa
ALTER TABLE transaksi
ADD CONSTRAINT fk_trans_pelanggan
FOREIGN KEY (Id_Pelanggan) REFERENCES pelanggan(Id_Pelanggan),
ADD CONSTRAINT fk_trans_penjual
FOREIGN KEY (Id_Karyawan) REFERENCES penjual(ID),
ADD CONSTRAINT fk_trans_pulsa
FOREIGN KEY (Id_Pulsa) REFERENCES pulsa(Id_Pulsa);

INSERT INTO penjual (IdNama, NIK, jenis_kelamin, NO_tlpn, alamat, karyawan) VALUES
('Budi Santoso', '1234567890123456', 'Laki-laki', '081234567890', 'Jl. Merdeka No. 1, Jakarta', 'Karyawan Tetap'),
('Siti Aminah', '2345678901234567', 'Perempuan', '082134567891', 'Jl. Kenangan No. 5, Bandung', 'Karyawan Kontrak'),
('Andi Wijaya', '3456789012345678', 'Laki-laki', '083234567892', 'Jl. Pelangi No. 9, Surabaya', 'Karyawan Tetap'),
('Rina Oktaviani', '4567890123456789', 'Perempuan', '084234567893', 'Jl. Mawar No. 7, Yogyakarta', 'Karyawan Magang'),
('Fajar Nugroho', '5678901234567890', 'Laki-laki', '085234567894', 'Jl. Sakura No. 3, Semarang', 'Karyawan Tetap');

INSERT INTO supplier (Nama, web, deposit, No_Tlpn, Saldominimum, ID_Penjual) VALUES
('PT. Pulsa Nusantara', 'https://pulsa-nusantara.co.id', 10000000.00, '0217000123', 50000.00, 1),
('CV. Topup Cepat', 'https://topupcepat.com', 7500000.00, '0228000456', 25000.00, 2),
('PT. Reload Express', 'https://reloadexpress.co.id', 12000000.00, '0319000678', 30000.00, 3),
('PT. Isi Ulang Kita', 'https://isiulang.id', 9500000.00, '02741000123', 20000.00, 4),
('CV. PulsaKita', 'https://pulsakita.com', 8500000.00, '0246000123', 40000.00, 5);


INSERT INTO pulsa (Nama_Pulsa, Harga_pulsa) VALUES
('Pulsa Telkomsel 5.000', 6500),
('Pulsa Telkomsel 10.000', 11000),
('Pulsa Indosat 25.000', 26000),
('Pulsa XL 50.000', 51000),
('Pulsa Axis 100.000', 100000);


INSERT INTO pelanggan (Nama_Pelanggan, No_Telp_Pelanggan) VALUES
('Agus Pratama', '081298765432'),
('Dewi Lestari', '082112345678'),
('Riko Saputra', '083312345679'),
('Sari Melati', '085612345680'),
('Bambang Hermawan', '081234567891');

INSERT INTO transaksi (Id_Pelanggan, Id_Karyawan, Id_Pulsa, Tanggal_Transaksi, Total_Transaksi) VALUES
(1, 1, 1, '2025-04-10', 6500),
(2, 2, 2, '2025-04-11', 11000),
(3, 3, 3, '2025-04-12', 26000),
(4, 4, 4, '2025-04-13', 51000),
(5, 5, 5, '2025-04-14', 100000);

SELECT * FROM penjual;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
SELECT * FROM supplier;
SELECT * FROM pulsa;
SELECT * FROM pelanggan;
SELECT * FROM transaksi;

-- 1 Menampilkan semua database yang tersedia di server
SHOW DATABASES;

-- 2 Menampilkan struktur tabel pelanggan (kolom, tipe data, dll)
DESCRIBE pelanggan;

-- 3  Menampilkan semua nama pelanggan dari tabel pelanggan
SELECT Nama_pelanggan FROM pelanggan;

-- 4 Menampilkan nama dan ID pelanggan dari tabel pelanggan
SELECT Nama_pelanggan, Id_pelanggan FROM pelanggan;

-- 5 Menampilkan nama pelanggan dengan menyebutkan nama tabel (biasanya untuk query lebih kompleks)
SELECT pelanggan.Nama_pelanggan FROM pelanggan;

-- 6 Jika ingin mengambil Id_Pelanggan dari tabel jual_pulsa, perlu JOIN antar tabel
SELECT jual_pulsa.pelanggan.Id_Pelanggan FROM pelanggan;

-- 7 Menampilkan Id_pelanggan dengan alias "Ip" (pakai AS)
SELECT Id_pelanggan AS Ip FROM pelanggan;

-- 8 Menampilkan Id_pelanggan dengan alias "Ip" (tanpa AS, langsung tulis)
SELECT Id_pelanggan Ip FROM pelanggan;

-- 9 Mengambil nama pelanggan, dari tabel pelanggan yang diberi alias "plgn" (tapi aliasnya belum digunakan)
SELECT Nama_pelanggan FROM pelanggan AS plgn;

-- 10 Mengambil nama pelanggan dengan menggunakan alias tabel "plgn"
SELECT plgn.Nama_pelanggan FROM pelanggan AS plgn;




